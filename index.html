<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Flores para Ti</title>

  <!-- Librer√≠as -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body { margin: 0; overflow-x: hidden; font-family: 'Arial', sans-serif; background: linear-gradient(135deg, #BA55D3, #BA55D3); }
    #canvas-container { width: 100%; height: 50vh; display: flex; justify-content: center; align-items: center; background: #000; }
    #card-container { width: 100%; height: 50vh; display: flex; justify-content: center; align-items: center; perspective: 1000px; }
    
    /* Tarjeta */
    .card {
      width: 100%;
      max-width: 400px;
      height: 250px;
      position: relative;
      cursor: pointer;
      transform-style: preserve-3d;
      transition: transform 0.8s;
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
      border-radius: 1rem;
      background-color: #d8b4fe; /* fuchsia-300 */
    }
    .card.flipped {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 1rem;
      padding: 1rem;
      color: white;
      font-weight: bold;
      font-size: 1.5rem;
      user-select: none;
    }

    .front {
      background-color: #d8b4fe; /* fuchsia-300 */
      color: white;
      flex-direction: column;
      position: relative;
    }
    .front .flowers, .front .hearts {
      position: absolute;
      font-size: 2.5rem;
      opacity: 0.4;
    }
    .front .flowers.top-left { top: 0.5rem; left: 0.5rem; }
    .front .flowers.bottom-right { bottom: 0.5rem; right: 0.5rem; }
    .front .hearts.top-right { top: 1rem; right: 1rem; font-size: 2rem; }
    .front .hearts.bottom-left { bottom: 1rem; left: 1rem; font-size: 2rem; }

    .back {
      background-color: #7c3aed; /* purple-700 */
      transform: rotateY(180deg);
      color: #f3e8ff; /* lighter purple */
      font-size: 1.2rem;
      text-align: center;
      flex-direction: column;
    }

    #open-message {
      margin-top: 1rem;
      font-size: 1rem;
      color: #fdf4ff;
      font-style: italic;
      user-select: none;
    }
  </style>
</head>
<body>
  <div id="canvas-container"></div>
  <div id="card-container">
    <div id="card" class="card">
      <div class="card-face front">
        <div>¬øQuieres ser mi novia?</div>
        <span class="flowers top-left">üå∏</span>
        <span class="flowers bottom-right">üå∏</span>
        <span class="hearts top-right">‚ù§Ô∏è</span>
        <span class="hearts bottom-left">‚ù§Ô∏è</span>
        <div id="open-message">√Åbreme</div>
      </div>
      <div class="card-face back">
        <p>Se que ya te lo ped√≠, pero no pude encontrar las flores que quer√≠as, y es por eso que te doy estas flores.<br>
        Lo siento por el hecho de que no son f√≠sicas.<br>
        Psdt: Lo siento por no llevarte ni las flores ni el helado.<br>
        <strong>Te quiero mucho, Atte: Ian</strong></p>
      </div>
    </div>
  </div>

  <audio id="romanticAudio" src="https://elgeneroplus.com/downloads/Ken-Y_-_Princesa_(Reggaeton_Version)_(By_JGalvezFlow)_(WWW.ELGENERO.COM).mp3"></audio>

  <!-- Animaci√≥n con p5.js -->
  <script>
    const sketch = (p) => {
      let j = 0, i = 0, drawing = true;
      let scaleFactor = 1, angleOffset = 0, flowerIndex = 0;
      //const colors = [ '#DDA0DD', '#BA55D3', '#9B59B6', '#800080'];
      const colors = [ '#800080', '#9B59B6', '#BA55D3', '#DDA0DD'];

      p.setup = () => {
        const canvas = p.createCanvas(800, 400);
        canvas.parent('canvas-container');
        p.background(0);
        p.strokeWeight(2);
        p.angleMode(p.DEGREES);
        p.frameRate(30);
        p.noFill();
      };

      p.draw = () => {
        if (!drawing) return;
        p.stroke(colors[flowerIndex % colors.length]);
        p.push();
        p.translate(p.width / 2, p.height / 2);
        p.scale(scaleFactor);
        p.rotate(angleOffset);
        if (j < 25) {
          if (i < 15) {
            p.push();
            p.rotate(i * (360 / 15));
            p.rotate(90);
            p.arc(0, -(200 - j * 4), 2 * (200 - j * 4), 2 * (200 - j * 4), 0, 90);
            p.rotate(-90);
            p.arc(0, (200 - j * 4), 2 * (200 - j * 4), 2 * (200 - j * 4), 180, 270);
            p.rotate(180);
            p.arc(0, 50, 100, 100, -24, 0);
            p.pop();
            i++;
          } else {
            i = 0;
            j++;
          }
        } else {
          drawing = false;
          j = 0;
          i = 0;
          setTimeout(() => {
            flowerIndex++;
            scaleFactor *= 0.95;
            angleOffset += 137.5;
            drawing = true;
            if (flowerIndex >= colors.length) {
              flowerIndex = 0;
              scaleFactor = 1;
              angleOffset = 0;
              p.background(0);
            }
          }, 0);
        }
        p.pop();
      };

      p.windowResized = () => {
        const canvasWidth = Math.min(p.windowWidth, 800);
        const canvasHeight = Math.min(p.windowHeight * 0.5, 400);
        p.resizeCanvas(canvasWidth, canvasHeight);
        p.background(0);
        j = 0; i = 0;
        scaleFactor = 1;
        angleOffset = 0;
        flowerIndex = 0;
        drawing = true;
      };
    };

    new p5(sketch);
  </script>

  <script>
    const card = document.getElementById('card');
    const audio = document.getElementById('romanticAudio');

    let isFlipped = false;

    card.addEventListener('click', () => {
      isFlipped = !isFlipped;
      card.classList.toggle('flipped');

      if (isFlipped) {
        audio.play().catch(e => console.warn("No se pudo reproducir el audio:", e));
      } else {
        audio.pause();
        audio.currentTime = 0;
      }
    });
  </script>

</body>
</html>
